# ============================================
# API AUDACE STACK - Configuration Docker
# ============================================
# Repository: https://github.com/lwilly3/api.audace.git

# === API CONFIGURATION (CRITIQUE) ===
# Clé secrète pour signer les JWT (min 32 caractères)
# Générer: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=

# Algorithme de signature JWT (HS256 recommandé)
ALGORITHM=HS256

# Durée de validité des tokens JWT (en minutes)
ACCESS_TOKEN_EXPIRATION_MINUTE=30

# Origines autorisées pour CORS (séparées par des virgules)
# Production: NE PAS utiliser *
CORS_ORIGINS=https://app.radioaudace.com

# === DATABASE POSTGRESQL (CRITIQUE) ===
# Nom d'utilisateur PostgreSQL
POSTGRES_USER=audace_user

# Mot de passe PostgreSQL (min 12 caractères)
POSTGRES_PASSWORD=

# Nom de la base de données
POSTGRES_DB=audace_db

# URL complète de connexion (générée automatiquement)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# === ICECAST STREAMING (CRITIQUE) ===
# Mot de passe admin Icecast (interface /admin)
ICECAST_ADMIN_PASSWORD=

# Mot de passe pour les sources audio (diffuseurs)
ICECAST_SOURCE_PASSWORD=

# Mot de passe pour les relais (optionnel)
ICECAST_RELAY_PASSWORD=

# Nom de domaine du serveur Icecast
ICECAST_HOSTNAME=radio.audace.ovh

# Nombre maximum d'auditeurs simultanés
ICECAST_MAX_CLIENTS=1000

# Nombre maximum de sources audio
ICECAST_MAX_SOURCES=10

# === CONFIGURATION SYSTÈME ===
# Port externe pour l'API
APP_PORT=8002

# Port externe pour Icecast
ICECAST_PORT=8000

# Fuseau horaire
TZ=Europe/Paris

# Niveau de logs (debug | info | warning | error)
LOG_LEVEL=info

# Nombre de workers Gunicorn
# Calcul: (2 × CPU_cores) + 1
API_WORKERS=4

# === NGINX / SSL ===
# Domaine pour l'API
API_DOMAIN=api.radio.audace.ovh

# Domaine pour Icecast
ICECAST_DOMAIN=radio.audace.ovh

# Email pour Certbot (notifications SSL)
ADMIN_EMAIL=admin@example.com

# === MONITORING (OPTIONNEL) ===
# Sentry DSN pour le tracking d'erreurs
SENTRY_DSN=

# === GIT / CI/CD (OPTIONNEL) ===
# Repository Git de l'API
API_REPO=https://github.com/lwilly3/api.audace.git

# Branche à déployer
API_BRANCH=main

# Métadonnées de build (généré en CI/CD)
BUILD_DATE=
GIT_COMMIT=
